(()=>{var e={};e.id=776,e.ids=[776],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},2065:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>m}),t(8280),t(4279),t(5866);var a=t(3191),s=t(8716),i=t(7922),l=t.n(i),o=t(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(r,n);let m=["",{children:["user",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8280)),"/home/ayman-u/Desktop/myData/chemist-task/frontend/app/user/register/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4279)),"/home/ayman-u/Desktop/myData/chemist-task/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/ayman-u/Desktop/myData/chemist-task/frontend/app/user/register/page.tsx"],u="/user/register/page",c={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/user/register/page",pathname:"/user/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},4844:(e,r,t)=>{Promise.resolve().then(t.bind(t,7433))},6760:(e,r,t)=>{Promise.resolve().then(t.bind(t,1729))},7529:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},7433:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>n,a:()=>m});var a=t(326),s=t(7577),i=t(5047),l=t(6615);let o=(0,s.createContext)(void 0);function n({children:e}){let[r,t]=(0,s.useState)(null),[n,m]=(0,s.useState)(!0),d=(0,i.useRouter)();return a.jsx(o.Provider,{value:{user:r,isLoading:n,login:(e,r)=>{(0,l.setCookie)("access_token",e),(0,l.setCookie)("user_data",JSON.stringify(r)),t(r)},logout:()=>{(0,l.deleteCookie)("access_token"),(0,l.deleteCookie)("user_data"),(0,l.deleteCookie)("userRegistered"),t(null),d.push("/")}},children:e})}let m=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1729:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(326),s=t(7577),i=t(5047),l=t(7256),o=t(6562);class n extends Error{constructor(e,r,t){super(e),this.status=r,this.path=t,this.name="UserApiError"}}let m=async(e,r)=>{let t=o.Z.get("access_token");if(!t)throw new n("Not authenticated",401,"/api/users");try{let a=new FormData;a.append("fullName",r.fullName),a.append("dateOfBirth",r.dateOfBirth),a.append("resumeSummary",r.resumeSummary),a.append("preferredLocationId",r.preferredLocationId.toString()),a.append("programmingSkills",JSON.stringify(r.programmingSkills)),r.profileImage&&a.append("profileImage",r.profileImage);let s=await fetch(`http://localhost:4000/api/users/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`},body:a,credentials:"include"}),i=await s.json();if(!s.ok)throw new n(i.message,i.statusCode,i.path);return i.success&&(o.Z.set("user_data",JSON.stringify(i.data),{secure:!0,sameSite:"strict",path:"/"}),o.Z.set("userRegistered","true",{secure:!0,sameSite:"strict",path:"/"})),i}catch(e){if(console.error("Error in updateUserProfile:",e),e instanceof n)throw e;throw new n("Network error",500,"/api/users")}},d=(e,r)=>l.z.object({fullName:l.z.string().min(2,"Full name must be at least 2 characters"),dateOfBirth:l.z.string().refine(e=>new Date().getFullYear()-new Date(e).getFullYear()>=18,"You must be at least 18 years old"),resumeSummary:l.z.string().min(5,"Resume summary must be at least 5 characters"),preferredLocationId:l.z.number().min(1,"Please select a location"),programmingSkills:l.z.array(l.z.number()).min(1,"Select at least one skill")}),u=e=>e?new Date(e).toISOString().split("T")[0]:"";function c(){(0,i.useRouter)();let[e,r]=(0,s.useState)(!1),t=(()=>{try{let e=o.Z.get("user_data");if(e){let r=JSON.parse(e),t=r.preferredLocation?.id;return{fullName:r.fullName??"",dateOfBirth:r.dateOfBirth?u(r.dateOfBirth):"",resumeSummary:r.resumeSummary??"",preferredLocationId:t?Number(t):0,programmingSkills:Array.isArray(r.programmingSkills)?r.programmingSkills.map(e=>Number(e.id)):[]}}}catch(e){console.error("Error parsing initial user data:",e)}return{fullName:"",dateOfBirth:"",resumeSummary:"",preferredLocationId:0,programmingSkills:[]}})(),[c,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)({}),[h,x]=(0,s.useState)([]),[y,b]=(0,s.useState)([]),[N,S]=(0,s.useState)(t),[v,j]=(0,s.useState)(!0),k=o.Z.get("access_token"),w=o.Z.get("user_data");if(!e||!k||!w)return null;if(v)return a.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-50 to-gray-100",children:a.jsx("main",{className:"flex-grow flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading options..."})]})})});let P=e=>{let{name:r,value:t}=e.target;S(e=>({...e,[r]:"preferredLocationId"===r?t?Number(t):0:t})),f[r]&&g(e=>({...e,[r]:""}))},I=e=>{S(r=>({...r,programmingSkills:r.programmingSkills.includes(e)?r.programmingSkills.filter(r=>r!==e):[...r.programmingSkills,e]})),f.programmingSkills&&g(e=>({...e,programmingSkills:""}))},_=async e=>{e.preventDefault(),p(!0),g({});try{let e=o.Z.get("user_data");if(!e)throw new n("User data not found",401,"/user/register");let r=JSON.parse(e),t={...N,preferredLocationId:Number(N.preferredLocationId),programmingSkills:N.programmingSkills.map(e=>Number(e))},a=d(h,y).parse(t),s=await m(r.id,a);if(s.success){o.Z.set("user_data",JSON.stringify(s.data),{secure:!0,sameSite:"strict",path:"/"}),o.Z.set("userRegistered","true",{secure:!0,sameSite:"strict",path:"/"}),window.location.href="/user";return}g({fullName:s.message||"Registration failed. Please try again."})}catch(e){if(e instanceof l.z.ZodError){let r={};e.errors.forEach(e=>{let[t]=e.path;r[t]=e.message}),g(r)}else if(e instanceof n){if(401===e.status){window.location.href="/";return}g({fullName:e.message})}else g({fullName:"An unexpected error occurred. Please try again."})}finally{p(!1)}};return a.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-50 to-gray-100",children:a.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:a.jsx("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-blue-600 px-6 py-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Complete Your Profile"}),a.jsx("p",{className:"text-blue-100 mt-2",children:"Please provide your information to continue"})]}),(0,a.jsxs)("form",{onSubmit:_,className:"p-6 space-y-6",role:"form",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("input",{id:"fullName",name:"fullName",type:"text",required:!0,value:N.fullName,onChange:P,className:"block w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900  focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20",placeholder:"Enter your full name"}),f.fullName&&a.jsx("p",{className:"text-sm text-red-500",children:f.fullName})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),a.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",required:!0,value:N.dateOfBirth,onChange:P,className:"block w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900  focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20"}),f.dateOfBirth&&a.jsx("p",{className:"text-sm text-red-500",children:f.dateOfBirth})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{htmlFor:"resumeSummary",className:"block text-sm font-medium text-gray-700",children:"Resume Summary"}),a.jsx("textarea",{id:"resumeSummary",name:"resumeSummary",required:!0,value:N.resumeSummary,onChange:P,rows:4,className:"block w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900  focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20",placeholder:"Brief summary of your professional background"}),f.resumeSummary&&a.jsx("p",{className:"text-sm text-red-500",children:f.resumeSummary})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{htmlFor:"preferredLocationId",className:"block text-sm font-medium text-gray-700",children:"Preferred Location"}),(0,a.jsxs)("select",{id:"preferredLocationId",name:"preferredLocationId",required:!0,value:N.preferredLocationId||"",onChange:P,className:"block w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900  focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20",children:[a.jsx("option",{value:"",children:"Select a location"}),h?.map(e=>a.jsx("option",{value:e.id,children:e.locationName},e.id))]}),f.preferredLocationId&&a.jsx("p",{className:"text-sm text-red-500",children:f.preferredLocationId})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Programming Skills"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mt-2",children:y?.map(e=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:N.programmingSkills.includes(e.id),onChange:()=>I(e.id),className:"rounded border-gray-300 text-blue-600  focus:ring-blue-500 focus:ring-offset-0"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))}),f.programmingSkills&&a.jsx("p",{className:"text-sm text-red-500",children:f.programmingSkills})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx("label",{htmlFor:"profileImage",className:"block text-sm font-medium text-gray-700",children:"Profile Image"}),a.jsx("input",{id:"profileImage",name:"profileImage",type:"file",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];if(r){if(r.size>5242880){g(e=>({...e,profileImage:"File size must be less than 5MB"}));return}if(!r.type.startsWith("image/")){g(e=>({...e,profileImage:"Please upload an image file"}));return}S(e=>({...e,profileImage:r})),f.profileImage&&g(e=>({...e,profileImage:""}))}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),f.profileImage&&a.jsx("p",{className:"text-sm text-red-500",children:f.profileImage}),N.profileImage&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Selected file: ",N.profileImage.name]})]}),a.jsx("div",{className:"pt-6",children:a.jsx("button",{type:"submit",disabled:c,className:"w-full inline-flex justify-center items-center py-3 px-6 border border-transparent  rounded-lg shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700  focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Complete Registration"})})]})]})})})})}},4279:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o,metadata:()=>l});var a=t(9510),s=t(8570);let i=(0,s.createProxy)(String.raw`/home/ayman-u/Desktop/myData/chemist-task/frontend/app/context/auth.context.tsx#AuthProvider`);(0,s.createProxy)(String.raw`/home/ayman-u/Desktop/myData/chemist-task/frontend/app/context/auth.context.tsx#useAuth`),t(7272);let l={title:"Login | Your App Name",description:"Secure login to access your account"};function o({children:e}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:a.jsx("body",{suppressHydrationWarning:!0,className:"font-sans",children:a.jsx(i,{children:e})})})}},8280:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/home/ayman-u/Desktop/myData/chemist-task/frontend/app/user/register/page.tsx#default`)},7481:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(6621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,981,739,256],()=>t(2065));module.exports=a})();