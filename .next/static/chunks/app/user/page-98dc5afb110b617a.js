(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{1499:function(e,t,r){Promise.resolve().then(r.bind(r,5061))},2686:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return c}});var i=r(7437),o=r(2265),a=r(9376),n=r(1614);let s=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),d=(0,a.useRouter)();return(0,o.useEffect)(()=>{let e=(0,n.getCookie)("access_token"),t=(0,n.getCookie)("user_data");if(e&&t)try{l(JSON.parse(t))}catch(e){console.error("Failed to parse user data:",e)}u(!1)},[]),(0,i.jsx)(s.Provider,{value:{user:r,isLoading:c,login:(e,t)=>{(0,n.setCookie)("access_token",e),(0,n.setCookie)("user_data",JSON.stringify(t)),l(t)},logout:()=>{(0,n.deleteCookie)("access_token"),(0,n.deleteCookie)("user_data"),(0,n.deleteCookie)("userRegistered"),l(null),d.push("/")}},children:t})}let c=()=>{let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5061:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var i=r(7437),o=r(2265),a=r(9376),n=r(2686),s=r(4131);let l=e=>{if(e)return"".concat("http://localhost:4000","/").concat(e)};function c(){var e,t,r,c,u;let d=(0,a.useRouter)(),{user:f,logout:p}=(0,n.a)(),[m,h]=(0,o.useState)(!0),[g,v]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=!0;return(async()=>{try{let t=s.Z.get("access_token"),r=s.Z.get("user_data"),i=s.Z.get("userRegistered");if(!t||!i){d.replace("/");return}if(await new Promise(e=>setTimeout(e,100)),r)try{let t=JSON.parse(r);e&&v(t)}catch(e){console.error("Failed to parse user data:",e),d.replace("/");return}}finally{e&&h(!1)}})(),()=>{e=!1}},[d]);let x=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(r.size>5242880){alert("File size must be less than 5MB");return}if(!r.type.startsWith("image/")){alert("Please upload an image file");return}let i=new FileReader;i.onloadend=()=>{v(e=>e?{...e,profileImage:i.result}:null)},i.readAsDataURL(r);try{let e=new FormData;e.append("profileImage",r);let t=s.Z.get("access_token");if(!t||!g)return;let i=await fetch("".concat("http://localhost:4000/api","/api/users/").concat(g.id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)},body:e,credentials:"include"});if(!i.ok)throw Error("Failed to update profile image");let o=await i.json();o.success&&(s.Z.set("user_data",JSON.stringify(o.data),{secure:!0,sameSite:"strict",path:"/"}),v(o.data))}catch(t){console.error("Error updating profile image:",t),alert("Failed to update profile image. Please try again.");let e=s.Z.get("user_data");if(e)try{let t=JSON.parse(e);v(t)}catch(e){console.error("Error reverting profile:",e)}}};return m?(0,i.jsx)("div",{"data-testid":"loading-container",className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-50 to-gray-100",children:(0,i.jsx)("main",{className:"flex-grow flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{"data-testid":"loading-spinner",role:"status","aria-label":"Loading",className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),(0,i.jsx)("p",{"data-testid":"loading-text",className:"mt-4 text-gray-600",children:"Loading profile..."})]})})}):g?(0,i.jsx)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-50 to-gray-100",children:(0,i.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,i.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-blue-600 px-6 py-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("label",{htmlFor:"profileImageUpload",className:"relative h-20 w-20 rounded-full bg-white/10 flex items-center justify-center cursor-pointer hover:bg-white/20 transition-all group",children:[g.profileImage?(0,i.jsx)("img",{src:l(g.profileImage)||"",alt:null!==(c=null===(e=g.fullName)||void 0===e?void 0:e.charAt(0))&&void 0!==c?c:"test",className:"h-20 w-20 rounded-full object-cover"}):(0,i.jsx)("span",{className:"text-3xl text-white",children:null!==(u=null===(t=g.fullName)||void 0===t?void 0:t.charAt(0))&&void 0!==u?u:"----"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/30 rounded-full opacity-0 group-hover:opacity-100  flex items-center justify-center transition-opacity",children:(0,i.jsx)("span",{className:"text-white text-xs",children:"Change Photo"})}),(0,i.jsx)("input",{id:"profileImageUpload",type:"file",accept:"image/*",className:"hidden",onChange:x})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white",children:g.fullName}),(0,i.jsx)("p",{className:"text-blue-100",children:g.email})]})]}),(0,i.jsx)("button",{onClick:()=>{p()},className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Logout",children:"Logout"})]})}),(0,i.jsx)("div",{className:"p-6 space-y-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),(0,i.jsx)("p",{className:"text-gray-900",children:new Date(g.dateOfBirth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Preferred Location"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.preferredLocation.locationName})]}),(0,i.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Resume Summary"}),(0,i.jsx)("p",{className:"text-gray-900",children:g.resumeSummary})]}),(0,i.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Programming Skills"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(r=g.programmingSkills)||void 0===r?void 0:r.map(e=>(0,i.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:e.name},e.id))})]})]})})]})})})}):null}},469:function(e,t){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");var r={},o=e.length;if(o<2)return r;var a=t&&t.decode||u,n=0,s=0,d=0;do{if(-1===(s=e.indexOf("=",n)))break;if(-1===(d=e.indexOf(";",n)))d=o;else if(s>d){n=e.lastIndexOf(";",s-1)+1;continue}var f=l(e,n,s),p=c(e,s,f),m=e.slice(f,p);if(!i.call(r,m)){var h=l(e,s+1,d),g=c(e,d,h);34===e.charCodeAt(h)&&34===e.charCodeAt(g-1)&&(h++,g--);var v=e.slice(h,g);r[m]=function(e,t){try{return t(e)}catch(t){return e}}(v,a)}n=d+1}while(n<o);return r},t.serialize=function(e,t,i){var l=i&&i.encode||encodeURIComponent;if("function"!=typeof l)throw TypeError("option encode is invalid");if(!o.test(e))throw TypeError("argument name is invalid");var c=l(t);if(!a.test(c))throw TypeError("argument val is invalid");var u=e+"="+c;if(!i)return u;if(null!=i.maxAge){var d=Math.floor(i.maxAge);if(!isFinite(d))throw TypeError("option maxAge is invalid");u+="; Max-Age="+d}if(i.domain){if(!n.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!s.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){var f=i.expires;if("[object Date]"!==r.call(f)||isNaN(f.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+f.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.partitioned&&(u+="; Partitioned"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():i.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var r=Object.prototype.toString,i=Object.prototype.hasOwnProperty,o=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,a=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function l(e,t,r){do{var i=e.charCodeAt(t);if(32!==i&&9!==i)return t}while(++t<r);return r}function c(e,t,r){for(;t>r;){var i=e.charCodeAt(--t);if(32!==i&&9!==i)return t+1}return r}function u(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}},1614:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>t.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCookie=t.deleteCookie=t.setCookie=t.getCookie=t.getCookies=void 0;var a=r(469),n=function(){return"undefined"!=typeof window},s=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},l=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&s(null==e?void 0:e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&s(null==e?void 0:e.res.cookies)||!!(null==e?void 0:e.cookies)&&s(e.cookies())},c=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,i=e.value;t[r]=i}),t},u=function(e){try{if("string"==typeof e)return e;return JSON.stringify(e)}catch(t){return e}};t.getCookies=function(e){if(l(e)){if(null==e?void 0:e.req)return c(e.req.cookies);if(null==e?void 0:e.cookies)return c(e.cookies())}if(e&&(t=e.req),!n())return t&&t.cookies?t.cookies:t&&t.headers.cookie?(0,a.parse)(t.headers.cookie):{};for(var t,r={},i=document.cookie?document.cookie.split("; "):[],o=0,s=i.length;o<s;o++){var u=i[o].split("="),d=u.slice(1).join("=");r[u[0]]=d}return r},t.getCookie=function(e,r){var i=(0,t.getCookies)(r)[e];if(void 0!==i)return i?i.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):i},t.setCookie=function(e,t,r){if(l(r)){var s,c,d,f=r.req,p=r.res,m=r.cookies,h=o(r,["req","res","cookies"]),g=i({name:e,value:u(t)},h);f&&f.cookies.set(g),p&&p.cookies.set(g),m&&m().set(g);return}if(r){var f=r.req,p=r.res,v=o(r,["req","res"]);c=f,d=p,s=v}var x=(0,a.serialize)(e,u(t),i({path:"/"},s));if(n())document.cookie=x;else if(d&&c){var y=d.getHeader("Set-Cookie");if(Array.isArray(y)||(y=y?[String(y)]:[]),d.setHeader("Set-Cookie",y.concat(x)),c&&c.cookies){var k=c.cookies;""===t?delete k[e]:k[e]=u(t)}if(c&&c.headers&&c.headers.cookie){var k=(0,a.parse)(c.headers.cookie);""===t?delete k[e]:k[e]=u(t),c.headers.cookie=Object.entries(k).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},t.deleteCookie=function(e,r){return(0,t.setCookie)(e,"",i(i({},r),{maxAge:-1}))},t.hasCookie=function(e,r){return!!e&&(0,t.getCookies)(r).hasOwnProperty(e)}},9376:function(e,t,r){"use strict";var i=r(5475);r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}})},4131:function(e,t,r){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}r.d(t,{Z:function(){return o}});var o=function e(t,r){function o(e,o,a){if("undefined"!=typeof document){"number"==typeof(a=i({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var s in a)a[s]&&(n+="; "+s,!0!==a[s]&&(n+="="+a[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+n}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],i={},o=0;o<r.length;o++){var a=r[o].split("="),n=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(i[s]=t.read(n,s),e===s)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){o(e,"",i({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,i({},this.attributes,t))},withConverter:function(t){return e(i({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1499)}),_N_E=e.O()}]);